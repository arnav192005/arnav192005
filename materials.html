<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Materials - College Study Material Hub</title>

  <style>
    :root {
      --bg: #0f172a;
      --bg-light: #111827;
      --primary: #3b82f6;
      --primary-soft: rgba(59, 130, 246, 0.15);
      --accent: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --card-bg: #111827;
      --border: #1f2933;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 35px rgba(112, 185, 44, 0.4);
    }

    :root[data-theme="light"] {
      --bg: #f8fafc;
      --bg-light: #f1f5f9;
      --primary: #0ea5e9;
      --primary-soft: rgba(14, 165, 233, 0.15);
      --accent: #10b981;
      --text: #1e293b;
      --muted: #64748b;
      --card-bg: #ffffff;
      --border: #e2e8f0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 25%, #0f172a 50%, #1e1b4b 75%, #0f172a 100%);
      background-size: 400% 400%;
      animation: gradientFlow 15s ease infinite;
      color: var(--text);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      transition: background 0.3s ease;
    }
    
    body.custom-bg {
      animation: none !important;
    }
    
    @media (max-width: 767px) {
      body {
        background: #0f172a;
        animation: none;
      }
    }

    @keyframes gradientFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.15) 0%, transparent 50%);
      animation: rotateGlow 20s linear infinite;
      pointer-events: none;
      z-index: 0;
    }
    
    @media (max-width: 767px) {
      body::before {
        display: none;
      }
    }

    @keyframes rotateGlow {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    /* Mobile Performance Optimization - Disable all animations and heavy effects */
    @media (max-width: 767px) {
      *, *::before, *::after {
        animation: none !important;
        transition-duration: 0.1s !important;
      }
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Floating Particles */
    .particles-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    
    @media (max-width: 767px) {
      .particles-bg {
        display: none;
      }
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: rgba(96, 165, 250, 0.6);
      border-radius: 50%;
      animation: floatParticle 8s linear infinite;
      box-shadow: 0 0 10px rgba(96, 165, 250, 0.8);
    }

    @keyframes floatParticle {
      0% { transform: translateY(100vh) translateX(0) scale(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) translateX(50px) scale(1); opacity: 0; }
    }

    .particle:nth-child(2n) {
      animation-duration: 10s;
      animation-delay: 2s;
      background: rgba(34, 197, 94, 0.6);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }

    .particle:nth-child(3n) {
      animation-duration: 12s;
      animation-delay: 4s;
      width: 4px;
      height: 4px;
    }

    .particle:nth-child(4n) {
      animation-duration: 9s;
      animation-delay: 1s;
    }

    /* Floating Particles */
    .particles-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: rgba(96, 165, 250, 0.6);
      border-radius: 50%;
      animation: floatParticle 8s linear infinite;
      box-shadow: 0 0 10px rgba(96, 165, 250, 0.8);
    }

    @keyframes floatParticle {
      0% { transform: translateY(100vh) translateX(0) scale(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) translateX(50px) scale(1); opacity: 0; }
    }

    .particle:nth-child(2n) {
      animation-duration: 10s;
      animation-delay: 2s;
      background: rgba(34, 197, 94, 0.6);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }

    .particle:nth-child(3n) {
      animation-duration: 12s;
      animation-delay: 4s;
      width: 4px;
      height: 4px;
    }

    .particle:nth-child(4n) {
      animation-duration: 9s;
      animation-delay: 1s;
    }

    /* Layout */

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px 12px 40px;
      position: relative;
      z-index: 2;
    }
    
    @media (max-width: 480px) {
      .page {
        padding: 16px 8px 40px;
      }
    }

    header {
      display: grid;
      grid-template-columns: auto auto 1fr auto;
      align-items: center;
      gap: 16px;
      padding: 12px 18px;
      border-radius: 999px;
      background: radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.16), transparent 40%),
                  linear-gradient(135deg, rgba(10, 16, 32, 0.92), rgba(14, 22, 46, 0.92));
      border: 1px solid rgba(255, 255, 255, 0.18);
      backdrop-filter: blur(18px) saturate(170%);
      -webkit-backdrop-filter: blur(18px) saturate(170%);
      position: sticky;
      top: 10px;
      z-index: 20;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35),
                  inset 0 1px 0 rgba(255, 255, 255, 0.12),
                  0 1px 32px rgba(96, 165, 250, 0.32);
      position: relative;
      overflow: visible;
      animation: liquidFlow 8s ease-in-out infinite;
      transition: all 0.3s ease;
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(96, 165, 250, 0.2);
    }
    
    @media (max-width: 767px) {
      header {
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        animation: mobileGlassFlow 6s ease-in-out infinite;
        background: rgba(10, 16, 32, 0.65);
        border: 1px solid rgba(96, 165, 250, 0.15);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(96, 165, 250, 0.1);
        grid-template-columns: auto auto 1fr auto auto auto;
        gap: 5px;
        padding: 6px 8px;
        min-height: 40px;
      }
    }

    header:hover {
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.45), 0 0 50px rgba(59, 130, 246, 0.4);
      border-color: rgba(96, 165, 250, 0.5);
    }
    
    .header-right-section {
      display: flex;
      align-items: center;
      gap: 12px;
      white-space: nowrap;
    }
    
    @media (max-width: 767px) {
      .header-right-section {
        gap: 4px;
        display: flex;
        align-items: center;
        flex-shrink: 0;
      }
    }
    
    @media (max-width: 767px) {
      header {
        grid-template-columns: auto auto 1fr auto auto;
        gap: 8px;
        padding: 8px 10px;
      }
      
      .nav-links {
        display: none;
      }
      
      .header-right-section {
        grid-column: auto;
        gap: 6px;
      }
      
      .current-page-indicator {
        display: none;
      }
    }

    @keyframes slideDown {
      from { transform: translateY(-100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes liquidFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes mobileGlassFlow {
      0%, 100% { 
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(96, 165, 250, 0.1);
        border-color: rgba(96, 165, 250, 0.15);
      }
      50% { 
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35),
                    inset 0 1px 0 rgba(96, 165, 250, 0.2);
        border-color: rgba(96, 165, 250, 0.25);
      }
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-circle {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0, #56a1f7, #eb253f);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 18px;
      color: #0b1120;
      box-shadow: 0 0 28px rgba(37, 99, 235, 0.8);
      animation: logoPulse 2s ease-in-out infinite;
      position: relative;
      flex-shrink: 0;
    }
    
    @media (max-width: 767px) {
      .logo-circle {
        width: 24px;
        height: 24px;
        font-size: 11px;
        animation: none;
        box-shadow: 0 0 8px rgba(37, 99, 235, 0.5);
      }
    }

    .logo-circle::after {
      content: '';
      position: absolute;
      width: 120%;
      height: 120%;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(96, 165, 250, 0.3), transparent);
      animation: logoRipple 2s ease-out infinite;
    }
    
    @media (max-width: 767px) {
      .logo-circle::after {
        display: none;
      }
    }

    @keyframes logoPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 28px rgba(37, 99, 235, 0.8); }
      50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(37, 99, 235, 1); }
    }

    @keyframes logoRipple {
      0% { transform: scale(0.8); opacity: 0.8; }
      100% { transform: scale(1.5); opacity: 0; }
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }

    .brand-text span:first-child {
      font-weight: 700;
      font-size: 18px;
    }
    
    @media (max-width: 767px) {
      .brand-text span:first-child {
        font-size: 10px;
      }
    }

    .brand-text span:last-child {
      font-size: 11px;
      color: var(--muted);
    }
    
    @media (max-width: 767px) {
      .brand-text span:last-child {
        display: none;
      }
    }

    .nav-links {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 18px;
      font-size: 14px;
    }

    .nav-links a {
      padding: 8px 12px;
      border-radius: 999px;
      color: #cbd5e1;
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      border: 1px solid transparent;
      background: rgba(255, 255, 255, 0.01);
    }

    .nav-links a::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, 
                  rgba(139, 92, 246, 0.2), 
                  rgba(59, 130, 246, 0.2));
      border-radius: 999px;
      transform: scale(0);
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: -1;
    }

    .nav-links a:hover {
      color: #fff;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 16px rgba(99, 102, 241, 0.35);
      transform: translateY(-1px);
    }
    
    @media (max-width: 767px) {
      .nav-links a:hover {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        transform: none;
      }
    }

    .nav-links a:hover::before {
      transform: scale(1);
      animation: liquidPulse 2s ease-in-out infinite;
    }
    
    @media (max-width: 767px) {
      .nav-links a:hover::before {
        animation: none;
      }
    }

    .nav-links a.active {
      color: #f8fafc;
      border: 1px solid rgba(139, 92, 246, 0.6);
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.25), rgba(59, 130, 246, 0.25));
      box-shadow: 0 8px 24px rgba(76, 106, 255, 0.4);
    }

    .nav-links .profile-btn-nav {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
      padding: 9px 18px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 700;
      transition: all 0.25s ease;
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 8px 26px rgba(124, 58, 237, 0.4);
    }

    .nav-links .profile-btn-nav:hover {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(124, 58, 237, 0.55);
    }

    .theme-toggle {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: radial-gradient(circle at 30% 30%, rgba(251, 191, 36, 0.25), rgba(30, 41, 59, 0.8));
      color: #fbbf24;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 28px rgba(251, 191, 36, 0.28);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      font-size: 18px;
    }
    
    /* Background Color Picker */
    .bg-color-picker {
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      flex-shrink: 0;
      z-index: 25;
    }
    
    .color-palette {
      display: none;
      position: fixed;
      bottom: auto;
      right: 8px;
      top: 50px;
      background: rgba(10, 16, 32, 0.95);
      border: 1px solid rgba(96, 165, 250, 0.3);
      border-radius: 12px;
      padding: 12px;
      gap: 8px;
      grid-template-columns: repeat(6, 1fr);
      max-height: 80vh;
      overflow-y: auto;
      z-index: 10000;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }
    
    .color-palette.show {
      display: grid;
    }
    
    .color-option {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .color-picker-section {
      grid-column: 1 / -1;
      border-top: 1px solid rgba(96, 165, 250, 0.2);
      padding-top: 12px;
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: center;
    }
    
    .color-wheel {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: conic-gradient(
        red, yellow, lime, cyan, blue, magenta, red
      );
      cursor: crosshair;
      border: 2px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
      position: relative;
    }
    
    .color-wheel::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background: white;
      border: 2px solid rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }
    
    .brightness-slider {
      width: 100%;
      height: 20px;
      border-radius: 10px;
      background: linear-gradient(to right, #000000, #0f172a, #ffffff);
      cursor: pointer;
      border: 2px solid rgba(255, 255, 255, 0.3);
      padding: 0;
      appearance: none;
      -webkit-appearance: none;
    }
    
    .brightness-slider::-webkit-slider-thumb {
      appearance: none;
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: white;
      border: 2px solid rgba(0, 0, 0, 0.5);
      cursor: pointer;
      box-shadow: 0 0 8px rgba(96, 165, 250, 0.5);
    }
    
    .brightness-slider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: white;
      border: 2px solid rgba(0, 0, 0, 0.5);
      cursor: pointer;
      box-shadow: 0 0 8px rgba(96, 165, 250, 0.5);
    }
    
    .customization-section {
      grid-column: 1 / -1;
      border-top: 1px solid rgba(96, 165, 250, 0.2);
      padding-top: 12px;
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .customization-label {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .font-selector {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .font-option {
      padding: 8px 12px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      background: rgba(96, 165, 250, 0.05);
      color: rgba(255, 255, 255, 0.8);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 12px;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .font-option:hover {
      background: rgba(96, 165, 250, 0.15);
      border-color: rgba(96, 165, 250, 0.5);
    }
    
    .font-option.active {
      background: rgba(96, 165, 250, 0.3);
      border-color: rgba(96, 165, 250, 0.8);
      color: #fff;
      box-shadow: 0 0 8px rgba(96, 165, 250, 0.4);
    }
    
    .text-color-picker {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    
    .text-color-input {
      width: 50px;
      height: 36px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 6px;
      cursor: pointer;
      background: white;
    }
    
    .text-color-label {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
      flex: 1;
    }
    
    .color-option:hover {
      transform: scale(1.1);
      border-color: rgba(96, 165, 250, 0.6);
      box-shadow: 0 0 12px rgba(96, 165, 250, 0.4);
    }
    
    .color-option.active {
      border-color: rgba(96, 165, 250, 0.8);
      box-shadow: 0 0 16px rgba(96, 165, 250, 0.6);
    }
    
    .bg-color-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: #0f172a;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      flex-shrink: 0;
    }
    
    @media (max-width: 767px) {
      .bg-color-btn {
        width: 28px;
        height: 28px;
        border-width: 1.5px;
        font-size: 10px;
      }
    }
    
    .bg-color-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
    }
    
    .header-icon-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: rgba(96, 165, 250, 0.15);
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      flex-shrink: 0;
    }
    
    @media (max-width: 767px) {
      .header-icon-btn {
        width: 28px;
        height: 28px;
        border-width: 1.5px;
        font-size: 10px;
      }
    }
    
    .header-icon-btn:hover {
      transform: scale(1.15);
      background: rgba(96, 165, 250, 0.25);
      box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
    }
    
    #bgColorInput {
      display: none;
    }
    
    .color-preview {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #0f172a;
      border: 1px solid rgba(255, 255, 255, 0.5);
    }
    
    /* Back Button in Header */
    .back-btn-header {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
      font-size: 18px;
      text-decoration: none;
    }
    
    .back-btn-header:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
    }
    
    @media (max-width: 767px) {
      .back-btn-header {
        width: 36px;
        height: 36px;
        font-size: 16px;
      }
    }
    
    /* Current Page Indicator */
    .current-page-indicator {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(16, 185, 129, 0.1));
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 999px;
      color: #4ade80;
      font-size: 13px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);
    }
    
    .current-page-indicator::before {
      content: 'ðŸ“š';
      font-size: 16px;
    }
    
    @media (max-width: 767px) {
      .current-page-indicator {
        font-size: 11px;
        padding: 6px 12px;
      }
      
      .current-page-indicator::before {
        font-size: 14px;
      }
    }

    .theme-toggle:hover {
      transform: translateY(-2px) scale(1.02);
      border-color: rgba(251, 191, 36, 0.6);
      box-shadow: 0 12px 30px rgba(251, 191, 36, 0.35);
    }

    @keyframes liquidPulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.6;
      }
      50% {
        transform: scale(1.1);
        opacity: 1;
      }
    }

    footer {
      margin-top: 32px;
      padding-top: 16px;
      font-size: 11px;
      color: var(--muted);
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* Materials section */

    .materials-section {
      margin-top: 28px;
    }

    .materials-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 12px;
    }

    .materials-header-left h2 {
      font-size: clamp(24px, 3vw, 28px);
      margin-bottom: 4px;
      background: linear-gradient(135deg, #00ff00, #34d399, #10b981);
      background-size: 200% 200%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientShift 3s ease infinite;
      filter: drop-shadow(0 0 15px rgba(0, 255, 0, 0.4));
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Profile Quick Info */
    .profile-quick-info {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
    }

    .profile-card-mini {
      background: linear-gradient(135deg, 
                  rgba(255, 255, 255, 0.1), 
                  rgba(255, 255, 255, 0.05));
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 20px;
      padding: 24px;
      display: flex;
      align-items: center;
      gap: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2),
                  0 1px 40px rgba(139, 92, 246, 0.3);
      position: relative;
      overflow: hidden;
      animation: liquidFlow 8s ease-in-out infinite;
    }

    .profile-card-mini::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg,
                  transparent,
                  rgba(139, 92, 246, 0.1),
                  rgba(59, 130, 246, 0.1),
                  transparent);
      animation: liquidWave 6s linear infinite;
      pointer-events: none;
    }

    .profile-card-mini::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg,
                  transparent,
                  rgba(139, 92, 246, 0.6),
                  rgba(59, 130, 246, 0.6),
                  transparent);
      animation: liquidEdge 3s ease-in-out infinite;
      filter: blur(1px);
    }

    @keyframes liquidFlow {
      0%, 100% {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2),
                    0 1px 40px rgba(139, 92, 246, 0.3);
      }
      50% {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3),
                    0 1px 50px rgba(59, 130, 246, 0.5);
      }
    }

    @keyframes liquidWave {
      0% {
        transform: translate(-25%, -25%) rotate(0deg);
      }
      100% {
        transform: translate(-25%, -25%) rotate(360deg);
      }
    }

    @keyframes liquidEdge {
      0%, 100% {
        opacity: 0.6;
        transform: scaleX(1);
      }
      50% {
        opacity: 1;
        transform: scaleX(1.05);
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .profile-avatar-mini {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #8b5cf6, #3b82f6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: bold;
      color: white;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.5);
      flex-shrink: 0;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }

    .profile-avatar-mini img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }

    .profile-details-mini {
      flex: 1;
      position: relative;
      z-index: 1;
    }

    .profile-details-mini h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 4px;
      background: linear-gradient(135deg, #8b5cf6, #3b82f6);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .profile-details-mini p {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
    }

    .view-profile-btn {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
      padding: 10px 20px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
      white-space: nowrap;
      position: relative;
      z-index: 1;
      overflow: hidden;
    }

    .view-profile-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .view-profile-btn:hover::before {
      left: 100%;
    }

    .view-profile-btn:hover {
      background: linear-gradient(135deg, #7c3aed, #6d28d9);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 92, 246, 0.6);
    }

    @media (max-width: 768px) {
      .profile-card-mini {
        flex-direction: column;
        text-align: center;
      }

      .view-profile-btn {
        width: 100%;
      }
    }

    /* Live Viewers */
    .live-viewers-toggle {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.5);
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      z-index: 100;
      animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes popIn {
      from {
        opacity: 0;
        transform: scale(0);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .live-viewers-toggle:hover {
      transform: scale(1.15);
      box-shadow: 0 6px 25px rgba(139, 92, 246, 0.7);
    }

    .live-viewers-toggle.active {
      background: linear-gradient(135deg, #ef4444, #dc2626);
    }

    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: linear-gradient(135deg, #22c55e, #10b981);
      color: white;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      border: 2px solid rgba(10, 10, 15, 0.8);
      animation: pulse 2s ease-in-out infinite;
    }

    .live-viewers {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, 
                  rgba(255, 255, 255, 0.1), 
                  rgba(255, 255, 255, 0.05));
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 20px;
      padding: 16px 20px;
      width: 300px;
      max-height: 350px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2);
      z-index: 100;
      animation: slideInRight 0.5s ease;
      overflow: hidden;
      display: none;
      flex-direction: column;
    }

    .live-viewers.show {
      display: flex;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(400px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .viewers-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .viewers-icon {
      font-size: 20px;
      animation: pulse 2s ease-in-out infinite;
    }

    .viewers-title {
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
    }

    .close-viewers-btn {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
      margin-left: auto;
      transition: all 0.3s ease;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-viewers-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    .viewers-count {
      margin-left: auto;
      background: linear-gradient(135deg, #22c55e, #10b981);
      color: white;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      min-width: 30px;
      text-align: center;
    }

    .viewers-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
      max-height: 250px;
      padding-right: 5px;
    }

    .viewers-list::-webkit-scrollbar {
      width: 4px;
    }

    .viewers-list::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }

    .viewers-list::-webkit-scrollbar-thumb {
      background: rgba(139, 92, 246, 0.4);
      border-radius: 10px;
    }

    .viewers-list::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 92, 246, 0.6);
    }

    .viewer-item {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(139, 92, 246, 0.3);
      border-radius: 12px;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s ease;
      animation: slideInUp 0.4s ease;
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .viewer-item:hover {
      background: rgba(139, 92, 246, 0.15);
      border-color: rgba(139, 92, 246, 0.6);
      transform: translateX(5px);
    }

    .viewer-avatar {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #8b5cf6, #3b82f6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: white;
      flex-shrink: 0;
      overflow: hidden;
    }

    .viewer-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .viewer-info {
      flex: 1;
      min-width: 0;
    }

    .viewer-name {
      font-size: 13px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .viewer-time {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 2px;
    }

    .viewer-status {
      width: 8px;
      height: 8px;
      background: #22c55e;
      border-radius: 50%;
      flex-shrink: 0;
      animation: pulse 2s ease-in-out infinite;
    }

    .no-viewers {
      text-align: center;
      padding: 20px 10px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 13px;
    }

    @media (max-width: 768px) {
      .live-viewers {
        bottom: 20px;
        right: 20px;
        width: 280px;
      }
    }

    @media (max-width: 480px) {
      .live-viewers {
        bottom: 15px;
        right: 15px;
        width: 260px;
        padding: 12px 16px;
      }

      .viewers-title {
        font-size: 12px;
      }

      .viewers-count {
        font-size: 11px;
        padding: 3px 8px;
      }

      .viewer-item {
        padding: 8px 10px;
      }

      .viewer-name {
        font-size: 12px;
      }

      .viewer-time {
        font-size: 10px;
      }
    }

    /* Website Statistics */
    .website-stats {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: linear-gradient(135deg, 
                  rgba(255, 255, 255, 0.1), 
                  rgba(255, 255, 255, 0.05));
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.18);
      border-radius: 20px;
      padding: 16px 20px;
      width: 320px;
      max-height: 380px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2);
      z-index: 100;
      animation: slideInLeft 0.5s ease;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-400px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .stats-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .stats-icon {
      font-size: 20px;
      animation: pulse 2s ease-in-out infinite;
    }

    .stats-title {
      font-size: 14px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
    }

    .close-stats-btn {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
      margin-left: auto;
      transition: all 0.3s ease;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-stats-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: rgba(255, 255, 255, 0.9);
      transform: scale(1.1);
    }

    /* Website Stats Toggle Button */
    .website-stats-toggle {
      position: fixed;
      bottom: 30px;
      left: 30px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      z-index: 100;
      animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .website-stats-toggle:hover {
      transform: scale(1.15);
      box-shadow: 0 6px 25px rgba(59, 130, 246, 0.7);
    }

    .website-stats-toggle.active {
      background: linear-gradient(135deg, #ef4444, #dc2626);
    }

    .website-stats {
      display: none;
    }

    .website-stats.show {
      display: flex;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 14px;
    }

    .stat-box {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(139, 92, 246, 0.3);
      border-radius: 12px;
      padding: 12px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .stat-box:hover {
      background: rgba(139, 92, 246, 0.15);
      border-color: rgba(139, 92, 246, 0.6);
      transform: translateY(-3px);
    }

    .stat-number {
      font-size: 20px;
      font-weight: 700;
      background: linear-gradient(135deg, #8b5cf6, #3b82f6);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .top-pages {
      flex: 1;
      overflow-y: auto;
      padding-right: 5px;
    }

    .top-pages::-webkit-scrollbar {
      width: 4px;
    }

    .top-pages::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
    }

    .top-pages::-webkit-scrollbar-thumb {
      background: rgba(139, 92, 246, 0.4);
      border-radius: 10px;
    }

    .top-pages::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 92, 246, 0.6);
    }

    .pages-header {
      font-size: 12px;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 8px;
      padding-bottom: 6px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .page-item {
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      padding: 8px 10px;
      margin-bottom: 6px;
      font-size: 12px;
      transition: all 0.3s ease;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .page-item:hover {
      background: rgba(139, 92, 246, 0.12);
      border-color: rgba(139, 92, 246, 0.4);
      transform: translateX(4px);
    }

    .page-name {
      color: rgba(255, 255, 255, 0.85);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .page-views {
      background: rgba(34, 197, 94, 0.3);
      color: #22c55e;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 600;
      white-space: nowrap;
      margin-left: 8px;
    }

    @media (max-width: 768px) {
      .website-stats {
        bottom: 20px;
        left: 20px;
        width: 300px;
      }
    }

    @media (max-width: 480px) {
      .website-stats {
        bottom: 15px;
        left: 15px;
        width: 280px;
        padding: 12px 16px;
      }

      .stats-title {
        font-size: 12px;
      }

      .stat-number {
        font-size: 18px;
      }

      .stat-label {
        font-size: 10px;
      }

      .page-item {
        padding: 6px 8px;
        font-size: 11px;
      }

      .page-views {
        padding: 2px 4px;
        font-size: 9px;
      }
    }

    @media (max-width: 768px) {
      .profile-card-mini {
        flex-direction: column;
        text-align: center;
      }

      .view-profile-btn {
        width: 100%;
      }
    }

    .materials-header-left p {
      color: var(--muted);
      font-size: 14px;
    }

    .materials-header-right {
      font-size: 13px;
      color: var(--muted);
    }

    /* Search Section */
    .search-section {
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      animation: fadeInUp 0.8s ease-out 0.4s both;
      padding: 0;
      flex-direction: column;
      gap: 10px;
    }
    
    @media (max-width: 767px) {
      .search-section {
        margin-bottom: 14px;
        gap: 10px;
      }
    }
    
    @media (max-width: 480px) {
      .search-section {
        margin-bottom: 10px;
        gap: 8px;
      }
    }

    .search-container {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(15, 23, 42, 0.8);
      border-radius: 25px;
      padding: 8px 16px;
      border: 2px solid transparent;
      background-image: linear-gradient(rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.8)), 
                        linear-gradient(135deg, #3b82f6, #22c55e, #a78bfa);
      background-origin: border-box;
      background-clip: padding-box, border-box;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 30px rgba(59, 130, 246, 0.2);
      max-width: 100%;
      width: 100%;
      transition: all 0.3s ease;
      animation: borderFlow 3s linear infinite;
    }
    
    @media (max-width: 767px) {
      .search-container {
        padding: 6px 12px;
        gap: 8px;
      }
    }

    .search-container:focus-within {
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 50px rgba(59, 130, 246, 0.5);
      transform: translateY(-2px);
    }

    @keyframes borderFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .search-input {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text);
      font-size: 14px;
      outline: none;
      padding: 8px 0;
    }
    
    @media (max-width: 767px) {
      .search-input {
        font-size: 12px;
        padding: 6px 0;
      }
    }

    .search-input::placeholder {
      color: var(--muted);
    }

    .search-btn {
      padding: 8px 16px;
      border-radius: 20px;
      border: none;
      background: linear-gradient(135deg, #22c55e, #10b981, #059669);
      background-size: 200% 200%;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(34, 197, 94, 0.4);
      animation: buttonGradient 3s ease infinite;
      position: relative;
      overflow: hidden;
    }
    
    @media (max-width: 767px) {
      .search-btn {
        padding: 6px 12px;
        font-size: 12px;
        border-radius: 16px;
      }
    }

    .search-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .search-btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .search-btn:hover {
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 0 30px rgba(34, 197, 94, 0.6), 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .search-btn:active {
      transform: scale(0.98) translateY(0);
    }

    @keyframes buttonGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .filter-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      width: 100%;
      margin: 0 auto;
      padding: 0;
    }
    
    @media (max-width: 767px) {
      .filter-container {
        gap: 7px;
      }
    }
    
    @media (max-width: 480px) {
      .filter-container {
        gap: 6px;
      }
    }

    .filter-select {
      padding: 8px 12px;
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      font-size: 14px;
      outline: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      width: 100%;
      min-height: 40px;
      display: flex;
      align-items: center;
    }
    
    @media (max-width: 767px) {
      .filter-select {
        padding: 7px 10px;
        font-size: 11px;
        border-radius: 16px;
        min-height: 38px;
      }
    }
    
    @media (max-width: 480px) {
      .filter-select {
        padding: 6px 8px;
        font-size: 10px;
        min-height: 36px;
        border-radius: 14px;
      }
    }

    .filter-select:hover {
      border-color: rgba(0, 255, 0, 0.5);
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }

    .filter-select:focus {
      border-color: #00ff00;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
    }

    .filter-select:active {
      transform: scale(0.98);
    }

    .clear-btn {
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid rgba(239, 68, 68, 0.5);
      background: rgba(239, 68, 68, 0.1);
      color: #fca5a5;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      width: 100%;
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    @media (max-width: 767px) {
      .clear-btn {
        padding: 7px 12px;
        font-size: 11px;
        border-radius: 16px;
        min-height: 38px;
      }
    }
    
    @media (max-width: 480px) {
      .clear-btn {
        padding: 6px 8px;
        font-size: 10px;
        min-height: 36px;
        border-radius: 14px;
      }
    }

    .clear-btn:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(239, 68, 68, 0.7);
      box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
      transform: scale(1.05);
    }

    .clear-btn:active {
      transform: scale(0.98);
    }

    /* Loading animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(0, 255, 0, 0.3);
      border-radius: 50%;
      border-top-color: #00ff00;
      animation: spin 1s ease-in-out infinite;
      margin-left: 10px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .materials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 16px;
    }

    .material-card {
      background: linear-gradient(135deg, rgba(17, 24, 39, 0.9) 0%, rgba(31, 41, 55, 0.7) 100%);
      border-radius: 14px;
      border: 2px solid transparent;
      background-image: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(31, 41, 55, 0.8)),
                        linear-gradient(135deg, rgba(0, 255, 0, 0.3), rgba(34, 197, 94, 0.3), rgba(168, 85, 247, 0.2));
      background-origin: border-box;
      background-clip: padding-box, border-box;
      padding: 16px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.25);
      position: relative;
      overflow: hidden;
      transform-style: preserve-3d;
      perspective: 1000px;
      animation: cardSlideIn 0.6s ease-out backwards;
      backdrop-filter: blur(10px);
    }
    
    @media (max-width: 767px) {
      .material-card {
        animation: none;
        backdrop-filter: none;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
      }
    }

    .material-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(0, 255, 0, 0.15) 0%, transparent 70%);
      transform: scale(0);
      transition: transform 0.6s ease;
      pointer-events: none;
      z-index: 0;
    }
    
    @media (max-width: 767px) {
      .material-card::before {
        display: none;
      }
    }

    .material-card:hover::before {
      transform: scale(1);
    }

    .material-card:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 0 30px rgba(0, 255, 0, 0.6), 0 0 60px rgba(0, 255, 0, 0.4), 0 20px 40px rgba(0, 0, 0, 0.4);
      border-image: linear-gradient(135deg, rgba(0, 255, 0, 0.8), rgba(52, 211, 153, 0.8)) 1;
    }
    
    @media (max-width: 767px) {
      .material-card:hover {
        transform: none;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
      }
    }

    .material-card:active {
      transform: translateY(-5px) scale(0.99);
    }

    @keyframes cardSlideIn {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .material-card:nth-child(1) { animation-delay: 0.1s; }
    .material-card:nth-child(2) { animation-delay: 0.15s; }
    .material-card:nth-child(3) { animation-delay: 0.2s; }
    .material-card:nth-child(4) { animation-delay: 0.25s; }
    .material-card:nth-child(5) { animation-delay: 0.3s; }
    .material-card:nth-child(6) { animation-delay: 0.35s; }
    .material-card:nth-child(7) { animation-delay: 0.4s; }
    .material-card:nth-child(8) { animation-delay: 0.45s; }
    .material-card:nth-child(9) { animation-delay: 0.5s; }

    .material-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .material-title {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.3;
      flex: 1;
    }

    .material-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-left: 8px;
    }

    .material-badge {
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 10px;
      font-weight: 500;
      text-transform: uppercase;
    }

    .material-badge.branch {
      background: rgba(59, 130, 246, 0.2);
      color: #60a5fa;
    }

    .material-badge.semester {
      background: rgba(34, 197, 94, 0.2);
      color: #34d399;
    }

    .material-badge.type {
      background: rgba(168, 85, 247, 0.2);
      color: #a78bfa;
    }

    .material-description {
      color: var(--muted);
      font-size: 13px;
      line-height: 1.4;
      margin-bottom: 12px;
    }

    .material-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .material-code {
      font-size: 12px;
      color: var(--muted);
      font-weight: 500;
    }

    .material-link {
      padding: 8px 16px;
      border-radius: 8px;
      background: linear-gradient(135deg, #3b82f6, #2563eb, #1e40af);
      background-size: 200% 200%;
      color: white;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      animation: linkGradient 3s ease infinite;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .material-link::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: translate(-50%, -50%);
      transition: width 0.5s, height 0.5s;
    }

    .material-link:hover::after {
      width: 200px;
      height: 200px;
    }

    .material-link:hover {
      transform: scale(1.08) translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
    }

    .material-link:active {
      transform: scale(0.95);
    }

    @keyframes linkGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
      font-size: 14px;
    }

    @media (max-width: 800px) {
      header {
        border-radius: 18px;
      }
      .materials-grid {
        grid-template-columns: 1fr;
      }
      .nav-links {
        display: none;
      }
      .filter-container {
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }
      .filter-select {
        min-width: 200px;
        width: 100%;
        max-width: 280px;
      }
      .clear-btn {
        min-width: 200px;
        width: 100%;
        max-width: 280px;
      }
    }

    @media (max-width: 520px) {
      footer {
        flex-direction: column;
        align-items: flex-start;
      }
      .search-container {
        flex-direction: column;
        gap: 8px;
      }
      .search-input {
        width: 100%;
      }
      .search-btn {
        width: 100%;
      }
    }


  </style>
</head>
<body>
  <!-- Floating Particles Background -->
  <div class="particles-bg" id="particlesBg"></div>

<body>
  <div class="page">
    <!-- NAVBAR -->
    <header>
      <a href="collegeindex.html" class="back-btn-header" title="Back to Home">â†</a>
      <div class="brand">
        <div class="logo-circle">S</div>
        <div class="brand-text">
          <span>CODEX</span>
          <span>All your college notes in one place</span>
        </div>
      </div>
      <nav class="nav-links">
        <a href="collegeindex.html">Home</a>
        <a href="materials.html" class="active">Materials</a>
        <a href="about.html">About</a>
        <a href="profile.html" class="profile-btn-nav">Profile</a>
        <button class="theme-toggle" id="themeToggle" title="Toggle Dark/Light Mode">ðŸŒ™</button>
      </nav>
      <div class="header-right-section">
        <div class="current-page-indicator">Materials</div>
        <a href="about.html" class="header-icon-btn" title="About">â„¹ï¸</a>
        <div class="bg-color-picker">
          <button class="bg-color-btn" id="bgColorBtn" title="Change Background Color">
            <span class="color-preview"></span>
          </button>
          <div class="color-palette" id="colorPalette">
            <div class="color-picker-section">
              <div class="color-wheel" id="colorWheel"></div>
              <input type="range" id="brightnessSlider" class="brightness-slider" min="0" max="100" value="50">
              <input type="color" id="bgColorInputQuick" value="#0f172a" style="width: 60px; height: 40px; border-radius: 8px; border: 2px solid rgba(255, 255, 255, 0.3); cursor: pointer;">
            </div>
            
            <div class="customization-section">
              <div class="customization-label">ðŸ“ Font Style</div>
              <div class="font-selector" id="fontSelector"></div>
              
              <div class="customization-label">ðŸŽ¨ Text Color</div>
              <div class="text-color-picker">
                <input type="color" id="textColorInput" value="#ffffff" class="text-color-input">
                <span class="text-color-label">Foreground</span>
              </div>
            </div>
          </div>
          <input type="color" id="bgColorInput" value="#0f172a">
        </div>
      </div>
    </header>

    <!-- Profile Quick Info -->
    <section class="profile-quick-info" id="profileQuickInfo" style="display: none;">
      <div class="profile-card-mini">
        <div class="profile-avatar-mini" id="profileAvatarMini">?</div>
        <div class="profile-details-mini">
          <h3 id="profileNameMini">Guest User</h3>
          <p id="profileInfoMini">Not logged in</p>
        </div>
        <a href="profile.html" class="view-profile-btn">View Full Profile â†’</a>
      </div>
    </section>

    

    <!-- MATERIALS -->
    <section id="materials" class="materials-section">
      <div class="materials-header">
        <div class="materials-header-left">
          <h2>Study Materials</h2>
          <p>Curated resources organized for engineering students.</p>
        </div>
        <div class="materials-header-right">
          <span id="resultsCount">Showing all materials</span>
        </div>
      </div>

      <!-- Search Section -->
      <div class="search-section">
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search materials..." class="search-input">
          <button id="searchButton" class="search-btn">Search</button>
        </div>
        <div class="filter-container">
          <select id="branchFilter" class="filter-select">
            <option value="">All Branches</option>
            <option value="CE">CE</option>
          </select>
          <select id="semesterFilter" class="filter-select">
            <option value="">All Semesters</option>
            <option value="1">Semester 1</option>
            <option value="2">Semester 2</option>
            <option value="3">Semester 3</option>
          </select>
          <select id="typeFilter" class="filter-select">
            <option value="">All Types</option>
            <option value="notes">Notes</option>
            <option value="Mid/Uni">Mid/Uni Papers</option>
          </select>
          <button id="clearFilters" class="clear-btn">Clear All</button>
        </div>
      </div>

      <div id="materialsGrid" class="materials-grid">
        <!-- JS will inject cards here -->
      </div>

      <div id="emptyState" class="empty-state" style="display: none;">
        No materials match your filters. Change branch/semester or clear the
        search and try again.
      </div>
    </section>

    <footer>
      <span>Â© <span id="yearSpan"></span> CODEXÂ· Made for college students.</span>
      <span>
        Suggest improvements to your developer &middot; Keep backups of your PDFs.
      </span>
    </footer>
  </div>

  <script>
    const yearSpan = document.getElementById("yearSpan");
    yearSpan.textContent = new Date().getFullYear();

    // ===== THEME TOGGLE FUNCTIONALITY =====
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;

    // Load saved theme preference
    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);
    updateThemeButton(savedTheme);

    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeButton(newTheme);
    });

    function updateThemeButton(theme) {
      themeToggle.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
    }

    // Dummy data: replace / add your real links here
    const materials = [
      { // 3RD YEAR CE NOTES.........
        title: "DATABASE MANAGEMENT SYSTEMS",
        branch: "CE",
        semester: "3",
        type: "notes",
        subject: "DBMS",
        code: "CT306-N",
        description: "Clean, exam-focused DBMS notes with ER diagrams, normalization and SQL.",
        link: "https://drive.google.com/drive/folders/1FMO_8ciBbkh_JEq0jFBqcEx5R4e2OcgR?usp=drive_link",
      },
      {
        title: "IT - WORKSHOP",
        branch: "CE",
        semester: "3",
        type: "notes",
        subject: "IT Workshop",
        code: "CT305-N",
        description: "HTML CODES,PHP CODES,JAVA CODES ETC....",
        link: "https://drive.google.com/drive/folders/1xh_L3iaVgbZUaotHZCXzJVw03es365Ix?usp=drive_link",
      },
      {
        title: "DISCRETE MATHEMATICS",
        branch: "CE",
        semester: "3",
        type: "notes",
        subject: "Discrete Mathematics",
        code: "CC302B-N",
        description: "University PYQs with marking scheme and frequently repeated questions.",
        link: "https://drive.google.com/drive/folders/1TgolPWeHIcPZdNSfylBYPSNoLaCFGT0E?usp=drive_link",
      },
      {
        title: "DATA STRUCTURE & ALGORITHM",
        branch: "CE",
        semester: "3",
        type: "notes",
        subject: "DSA",
        code: "CT303-N",
        description: "IT COVERS ALL TOPICS WITH PYQS ALSO...",
        link: "https://drive.google.com/drive/folders/1a52PLx5ZXC-X8veHgu4abtCVLBpcmGDB?usp=drive_link",
      },
      {
        title: "DIGITAL ELECTRONICS",
        branch: "CE",
        semester: "3",
        type: "notes",
        subject: "Digital Electronics",
        code: "CT304-N",
        description: "All practicals with aim, theory, circuit diagram, procedure and observations.",
        link: "https://drive.google.com/drive/folders/105w0BfZ9C38_qYX2shqUsW1zr6sThsxy?usp=drive_link",
      },
      {
        title: "ALL PAPERS OF 3RD SEM CE",
        branch: "CE",
        semester: "3",
        type: "Mid/Uni",
        subject: "Previous Year Papers",
        code: "CT304-N",
        description: "PERVIOUS YEAR PAPERS.",
        link: "https://drive.google.com/drive/folders/1obu4YuvrYmeWHranP9mNu6I3anxBSt-E?usp=drive_link",
      },
      { // 2ND YEAR CE NOTES.......
        title: "ENGINEERING MATHEMATICS-II",
        branch: "CE",
        semester: "2",
        type: "notes",
        subject: "Maths-II",
        code: "25MA102",
        description: "Topic-wise important questions for Laplace, Fourier, and differential equations.",
        link: "https://drive.google.com/drive/folders/1veM1gdH-GkdDK7WW5zjS8nWXh05HB5Ha?usp=drive_link",
      },
      {
        title: "BASIC ELECTRICAL & ELECTRONICS ENGINEERING",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "BEEE",
        code: "25EE101",
        description: "Topic-wise important questions for Laplace, Fourier, and differential equations.",
        link: "https://drive.google.com/drive/folders/1C9HZrdkj5LXSibWzHGGDHz59srE1lwCp?usp=drive_link",
      },
      {
        title: "OBJECT ORIENTED PROGRAMMING USING C++",
        branch: "CE",
        semester: "2",
        type: "notes",
        subject: "OOPC++",
        code: "25CE102",
        description: "Topic-wise important questions and learnig for class object.",
        link: "https://drive.google.com/drive/folders/1p4e6VyWy5GGtIQuop5cjU0YkjZ8DUcUQ?usp=drive_link",
      }, 
      {
        title: "FUNDAMENTAL OF MECHANICAL ENGINEERING",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "FOME",
        code: "25ME101",
        description: "Topic-wise important questions and differential equations.",
        link: "https://drive.google.com/drive/folders/1wsg2iQr2la8R73Be_ZPryzKIYvJHvE9d?usp=drive_link",
      },
       {
        title: "WORKSHOP",
        branch: "CE",
        semester: "2",
        type: "notes",
        subject: "WORKSHOP",
        code: "25CE104",
        description: "Topic-wise important questions .",
        link: "https://drive.google.com/drive/folders/1j6puhnzEJgQhtOHqfXGQuAihUYCYRzTB?usp=drive_link",
      },
       {
        title: "BUSINESS COMMUNICATION AND PRESENTATION SKILLS",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "BCPS",
        code: "25HS101",
        description: "Topic-wise important questions.",
        link: "https://drive.google.com/drive/folders/1oBqE_4XLwypp2t57eQxv3M2hCHpEABGL?usp=drive_link",
      },
      
      
      { // 1ST YEAR CE NOTES.......

        title: "ENGINEERING MATHEMATICS-I",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "Maths-I",
        code: "25MA101",
        description: "All solutions available...",
        link: "https://drive.google.com/drive/folders/1DynfgDWLYCvycwrMqe4UCMwmno8oZIg4?usp=drive_link",
      },
      {
        title: "ENGINEERING PHYSICS",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "Physics",
        code: "25PH101",
        description: "First law, second law, cycles and properties in a crisp exam format.",
        link: "https://drive.google.com/drive/folders/1N87iuGphQFqZuJW9ghAI2CyaNBfpTnid?usp=drive_link",
      },
      {
        title: "FUNDEMENT OF PROGRAMMING",
        branch: "CE",
        semester: "1",
        type: "notes",
        subject: "FOP",
        code: "25CE101",
        description: "BEGGNING OF THE C LANGUAGE.",
        link: "https://drive.google.com/drive/folders/1zDqGqyk5BAe-hvpZ5LxXAucwnsfgb2ja?usp=drive_link",
      },
      {
        title: "ELEMENTS OF CIVIL ENGINEERING",
        branch: "CE",
        semester: "2",
        type: "notes",
        subject: "EOC",
        code: "25CV103",
        description: "Leveling, traversing, contouring experiments with neat diagrams.",
        link: "https://drive.google.com/drive/folders/1okXFqI-EZnSCTNAN_aTEOVru8XZxXHVK?usp=drive_link",
      }
      ,{
        title: "ENGINEERING GRAPHICS",
        branch: "CE",
        semester: "2",
        type: "notes",
        subject: "EG",
        code: "25ME102",
        description: "ORTHO,ISO,SCALE,ETC......",
        link: "https://drive.google.com/drive/folders/1Mulk0qDTAGrUkOmee4iEz-9yLu_yA3W6?usp=drive_link",
      }
    ];

    // DOM elements
    const materialsGrid = document.getElementById('materialsGrid');
    const resultsCount = document.getElementById('resultsCount');
    const emptyState = document.getElementById('emptyState');

    // Render materials with performance optimizations
    function renderMaterials(filteredMaterials = materials) {
      const materialsGrid = document.getElementById('materialsGrid');
      const emptyState = document.getElementById('emptyState');
      const resultsCount = document.getElementById('resultsCount');

      materialsGrid.innerHTML = '';

      if (filteredMaterials.length === 0) {
        emptyState.style.display = 'block';
        resultsCount.textContent = 'No materials found';
        return;
      }

      emptyState.style.display = 'none';
      resultsCount.textContent = `Showing ${filteredMaterials.length} material${filteredMaterials.length === 1 ? '' : 's'}`;

      // Use DocumentFragment for better performance
      const fragment = document.createDocumentFragment();

      filteredMaterials.forEach((material, index) => {
        const card = document.createElement('div');
        card.className = 'material-card';
        card.onclick = () => window.open(material.link, '_blank');

        // Apply animation delay during creation for better performance
        card.style.animationDelay = `${0.1 + (index * 0.05)}s`;

        card.innerHTML = `
          <div class="material-header">
            <div class="material-title">${material.title}</div>
            <div class="material-badges">
              <span class="material-badge branch">${material.branch}</span>
              <span class="material-badge semester">${material.semester}</span>
              <span class="material-badge type">${material.type}</span>
            </div>
          </div>
          <div class="material-description">${material.description}</div>
          <div class="material-footer">
            <span class="material-code">${material.code}</span>
            <span class="material-link">Open</span>
          </div>
        `;

        fragment.appendChild(card);
      });

      materialsGrid.appendChild(fragment);
    }

    // Initial render
    renderMaterials();

    // Load and display profile info if available
    loadProfileInfo();

    function loadProfileInfo() {
      const savedProfile = localStorage.getItem('studentProfile');
      const profileSection = document.getElementById('profileQuickInfo');
      
      if (savedProfile) {
        const profileData = JSON.parse(savedProfile);
        
        // Show profile section
        profileSection.style.display = 'block';
        
        // Update avatar
        const avatar = document.getElementById('profileAvatarMini');
        if (profileData.fullName) {
          avatar.textContent = profileData.fullName.charAt(0).toUpperCase();
        }
        
        // Load profile image if exists
        const savedImage = localStorage.getItem('profileImage');
        if (savedImage) {
          const imgElement = document.createElement('img');
          imgElement.src = savedImage;
          avatar.appendChild(imgElement);
          avatar.textContent = ''; // Clear text when image is shown
        }
        
        // Update name
        const nameEl = document.getElementById('profileNameMini');
        nameEl.textContent = profileData.fullName || 'Student';
        
        // Update info
        const infoEl = document.getElementById('profileInfoMini');
        let infoText = '';
        if (profileData.department && profileData.semester) {
          infoText = `${profileData.department} - Semester ${profileData.semester}`;
        } else if (profileData.department) {
          infoText = profileData.department;
        } else if (profileData.semester) {
          infoText = `Semester ${profileData.semester}`;
        } else {
          infoText = profileData.email || 'View your profile';
        }
        infoEl.textContent = infoText;
      }
    }

    // Search functionality with optimizations
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const branchFilter = document.getElementById('branchFilter');
    const semesterFilter = document.getElementById('semesterFilter');
    const typeFilter = document.getElementById('typeFilter');
    const clearFiltersBtn = document.getElementById('clearFilters');

    // Debounce function for search input
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    function clearAllFilters() {
      searchInput.value = '';
      branchFilter.value = '';
      semesterFilter.value = '';
      typeFilter.value = '';
      filterMaterials();
    }

    function filterMaterials() {
      const query = searchInput.value.toLowerCase().trim();
      const branch = branchFilter.value;
      const semester = semesterFilter.value;
      const type = typeFilter.value;

      const filtered = materials.filter(material => {
        if (branch && material.branch !== branch) return false;
        if (semester && material.semester !== semester) return false;
        if (type && material.type !== type) return false;

        if (!query) return true;

        // Optimized search: check individual fields instead of concatenating
        return material.title.toLowerCase().includes(query) ||
               material.subject.toLowerCase().includes(query) ||
               material.code.toLowerCase().includes(query) ||
               material.description.toLowerCase().includes(query) ||
               material.branch.toLowerCase().includes(query) ||
               material.semester.toLowerCase().includes(query) ||
               material.type.toLowerCase().includes(query);
      });

      renderMaterials(filtered);
    }

    // Debounced search function
    const debouncedFilter = debounce(filterMaterials, 300);

    // Event listeners with optimizations
    searchInput.addEventListener('input', debouncedFilter);
    searchButton.addEventListener('click', filterMaterials);
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') filterMaterials();
    });

    clearFiltersBtn.addEventListener('click', clearAllFilters);

    // Filter change handlers
    branchFilter.addEventListener('change', filterMaterials);
    semesterFilter.addEventListener('change', filterMaterials);
    typeFilter.addEventListener('change', filterMaterials);

    // Keyboard navigation for filters
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        clearAllFilters();
      }
    });

    // Initialize
    renderMaterials(materials);

    // Create floating particles
    function createFloatingParticles() {
      const particlesBg = document.getElementById('particlesBg');
      const particleCount = 15;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 8 + 's';
        particle.style.animationDuration = (8 + Math.random() * 4) + 's';
        particlesBg.appendChild(particle);
      }
    }
    
    createFloatingParticles();

    // Live Viewers Feature
    let viewersList = JSON.parse(localStorage.getItem('liveViewers')) || [];
    const SESSION_TIMEOUT = 5 * 60 * 1000; // 5 minutes

    function generateViewerId() {
      return 'viewer_' + Math.random().toString(36).substr(2, 9);
    }

    function getOrCreateViewer() {
      let viewer = JSON.parse(localStorage.getItem('currentViewer'));
      
      if (!viewer) {
        const profile = JSON.parse(localStorage.getItem('studentProfile'));
        viewer = {
          id: generateViewerId(),
          name: profile?.fullName || 'Anonymous User',
          image: localStorage.getItem('profileImage') || null,
          joinTime: new Date().getTime(),
          lastActive: new Date().getTime()
        };
        localStorage.setItem('currentViewer', JSON.stringify(viewer));
      } else {
        viewer.lastActive = new Date().getTime();
        localStorage.setItem('currentViewer', JSON.stringify(viewer));
      }
      
      return viewer;
    }

    function updateLiveViewers() {
      const currentTime = new Date().getTime();
      const currentViewer = getOrCreateViewer();
      
      // Get viewers from localStorage
      let viewers = JSON.parse(localStorage.getItem('liveViewers')) || [];
      
      // Remove inactive viewers (older than SESSION_TIMEOUT)
      viewers = viewers.filter(v => (currentTime - v.lastActive) < SESSION_TIMEOUT);
      
      // Add or update current viewer
      const existingIndex = viewers.findIndex(v => v.id === currentViewer.id);
      if (existingIndex >= 0) {
        viewers[existingIndex] = currentViewer;
      } else {
        viewers.push(currentViewer);
      }
      
      // Save back to localStorage
      localStorage.setItem('liveViewers', JSON.stringify(viewers));
      
      // Update UI
      displayLiveViewers(viewers);
    }

    function displayLiveViewers(viewers) {
      let viewersContainer = document.getElementById('liveViewersContainer');
      
      if (!viewersContainer) {
        // Create toggle button
        const toggleButton = document.createElement('div');
        toggleButton.id = 'liveViewersToggle';
        toggleButton.className = 'live-viewers-toggle';
        toggleButton.innerHTML = `
          <div class="badge">${viewers.length}</div>
          ðŸ‘¥
        `;
        toggleButton.addEventListener('click', () => {
          viewersContainer.classList.toggle('show');
          toggleButton.classList.toggle('active');
        });
        document.body.appendChild(toggleButton);

        viewersContainer = document.createElement('div');
        viewersContainer.id = 'liveViewersContainer';
        viewersContainer.className = 'live-viewers';
        document.body.appendChild(viewersContainer);
      }

      const currentViewer = JSON.parse(localStorage.getItem('currentViewer'));
      const otherViewers = viewers.filter(v => v.id !== currentViewer.id);

      let html = `
        <div class="viewers-header">
          <span class="viewers-icon">ðŸ‘¥</span>
          <span class="viewers-title">Live Viewers</span>
          <span class="viewers-count">${viewers.length}</span>
          <button class="close-viewers-btn" onclick="document.getElementById('liveViewersContainer').classList.remove('show'); document.getElementById('liveViewersToggle').classList.remove('active');">â†</button>
        </div>
        <div class="viewers-list">
      `;

      if (otherViewers.length === 0) {
        html += `<div class="no-viewers">You're the only one here</div>`;
      } else {
        otherViewers.forEach(viewer => {
          const joinMinutesAgo = Math.floor((new Date().getTime() - viewer.joinTime) / 60000);
          const timeText = joinMinutesAgo === 0 ? 'just now' : `${joinMinutesAgo}m ago`;
          
          const initial = viewer.name.charAt(0).toUpperCase();
          const avatarContent = viewer.image 
            ? `<img src="${viewer.image}" alt="${viewer.name}">`
            : initial;

          html += `
            <div class="viewer-item">
              <div class="viewer-avatar">${avatarContent}</div>
              <div class="viewer-info">
                <div class="viewer-name">${viewer.name}</div>
                <div class="viewer-time">Joined ${timeText}</div>
              </div>
              <div class="viewer-status"></div>
            </div>
          `;
        });
      }

      html += `</div>`;
      viewersContainer.innerHTML = html;

      // Update badge count
      const badge = document.querySelector('.badge');
      if (badge) {
        badge.textContent = viewers.length;
      }
    }

    // Initialize live viewers
    updateLiveViewers();

    // Update viewers every 10 seconds
    const updateViewersInterval = setInterval(updateLiveViewers, 10000);

    // Throttle mousemove updates to prevent excessive localStorage writes
    let lastActivityUpdate = 0;
    const ACTIVITY_UPDATE_THROTTLE = 5000; // Update at most once per 5 seconds

    // Update last active time on user interaction (throttled)
    document.addEventListener('mousemove', () => {
      const now = Date.now();
      if (now - lastActivityUpdate < ACTIVITY_UPDATE_THROTTLE) {
        return; // Skip update if too soon
      }
      lastActivityUpdate = now;

      let viewer = JSON.parse(localStorage.getItem('currentViewer'));
      if (viewer) {
        viewer.lastActive = now;
        localStorage.setItem('currentViewer', JSON.stringify(viewer));
      }
    });

    // Clean up viewer on page unload
    window.addEventListener('beforeunload', () => {
      // Clear intervals to prevent memory leaks
      clearInterval(updateViewersInterval);
      clearInterval(trackPageViewInterval);

      // Remove current viewer from live viewers list
      const currentViewer = JSON.parse(localStorage.getItem('currentViewer'));
      let viewers = JSON.parse(localStorage.getItem('liveViewers')) || [];
      viewers = viewers.filter(v => v.id !== currentViewer.id);
      localStorage.setItem('liveViewers', JSON.stringify(viewers));
    });

    // Website Statistics Tracking
    function trackPageView() {
      const currentPage = 'Materials';
      const stats = JSON.parse(localStorage.getItem('websiteStats')) || {
        totalVisits: 0,
        todayVisits: 0,
        totalPageViews: 0,
        lastDate: new Date().toDateString(),
        pages: {}
      };

      // Reset daily counter if new day
      const today = new Date().toDateString();
      if (stats.lastDate !== today) {
        stats.todayVisits = 0;
        stats.lastDate = today;
      }

      // Increment counters
      stats.totalVisits++;
      stats.todayVisits++;
      stats.totalPageViews++;

      // Track page views
      if (!stats.pages[currentPage]) {
        stats.pages[currentPage] = 0;
      }
      stats.pages[currentPage]++;

      localStorage.setItem('websiteStats', JSON.stringify(stats));
      displayWebsiteStats();
    }

    function displayWebsiteStats() {
      const stats = JSON.parse(localStorage.getItem('websiteStats')) || {
        totalVisits: 0,
        todayVisits: 0,
        totalPageViews: 0,
        pages: {}
      };

      let statsContainer = document.getElementById('websiteStatsContainer');
      
      if (!statsContainer) {
        // Create toggle button
        const toggleButton = document.createElement('div');
        toggleButton.id = 'websiteStatsToggle';
        toggleButton.className = 'website-stats-toggle';
        toggleButton.innerHTML = 'ðŸ“Š';
        toggleButton.addEventListener('click', () => {
          statsContainer.classList.toggle('show');
          toggleButton.classList.toggle('active');
        });
        document.body.appendChild(toggleButton);

        statsContainer = document.createElement('div');
        statsContainer.id = 'websiteStatsContainer';
        statsContainer.className = 'website-stats';
        document.body.appendChild(statsContainer);
      }

      // Get top pages
      const topPages = Object.entries(stats.pages)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 5);

      let html = `
        <div class="stats-header">
          <span class="stats-icon">ðŸ“Š</span>
          <span class="stats-title">Website Stats</span>
          <button class="close-stats-btn" onclick="document.getElementById('websiteStatsContainer').classList.remove('show'); document.getElementById('websiteStatsToggle')?.classList.remove('active');">â†</button>
        </div>
        <div class="stats-grid">
          <div class="stat-box">
            <div class="stat-number">${stats.totalVisits}</div>
            <div class="stat-label">Total Visits</div>
          </div>
          <div class="stat-box">
            <div class="stat-number">${stats.todayVisits}</div>
            <div class="stat-label">Today</div>
          </div>
        </div>
        <div class="top-pages">
          <div class="pages-header">ðŸ‘‰ TOP PAGES</div>
      `;

      if (topPages.length === 0) {
        html += `<div style="text-align: center; padding: 10px; color: rgba(255,255,255,0.5); font-size: 12px;">No data yet</div>`;
      } else {
        topPages.forEach(([page, views]) => {
          html += `
            <div class="page-item">
              <span class="page-name">ðŸ“„ ${page}</span>
              <span class="page-views">${views}</span>
            </div>
          `;
        });
      }

      html += `</div>`;
      statsContainer.innerHTML = html;
    }

    // Track page views on load
    trackPageView();

    // Update stats periodically
    const trackPageViewInterval = setInterval(trackPageView, 30000);

    // Background Color Picker Functionality
    const bgColorBtn = document.getElementById('bgColorBtn');
    const bgColorInput = document.getElementById('bgColorInput');
    const bgColorInputQuick = document.getElementById('bgColorInputQuick');
    const colorPalette = document.getElementById('colorPalette');
    const colorWheel = document.getElementById('colorWheel');
    const brightnessSlider = document.getElementById('brightnessSlider');
    const fontSelector = document.getElementById('fontSelector');
    const textColorInput = document.getElementById('textColorInput');
    const colorPreview = document.querySelector('.color-preview');
    const body = document.body;

    // Font options
    const fontOptions = [
      { name: 'System', family: 'system-ui, -apple-system, sans-serif' },
      { name: 'Serif', family: 'Georgia, serif' },
      { name: 'Mono', family: 'Courier New, monospace' },
      { name: 'Comic', family: 'Comic Sans MS, cursive' }
    ];

    let selectedHue = 0;
    let selectedBrightness = 50;

    // Color palette options
    const colorOptions = [
      // Dark Blues & Navies
      '#0f172a', '#1a1a2e', '#16213e', '#0d1b2a', '#1b1b3f', '#0a0e27',
      // Purples & Violets
      '#2d1b4e', '#1a1633', '#2a1a4e', '#3d1e4a', '#2e1a47', '#1f0f3d',
      // Teals & Cyans
      '#0a3d4a', '#1a4d5c', '#0d4a5e', '#164e63', '#1e5f70', '#0f5a6f',
      // Greens
      '#1a3a2e', '#2d5a4e', '#1f4d3d', '#2d6a52', '#1e5a45', '#0f453f',
      // Deep Reds & Maroons
      '#3d1a2e', '#4a1f3d', '#5a1f3e', '#3e1e2e', '#4d2a3a', '#2e1a28',
      // Browns & Grays
      '#2a2520', '#3a3430', '#1f1a15', '#4a4440', '#3d3835', '#2e2925',
      // Deep Oranges
      '#4a2a1f', '#5a3a2e', '#3d2a1f', '#5a4030', '#4a3528', '#2e1f15',
      // Blacks & Near-blacks
      '#000000', '#0a0a0a', '#1a1a1a', '#0f0f0f', '#15151a', '#1a151f'
    ];

    // Load saved background color from localStorage
    function loadBackgroundColor() {
      const savedColor = localStorage.getItem('bgColor') || '#0f172a';
      const savedFont = localStorage.getItem('bodyFont') || fontOptions[0].family;
      const savedTextColor = localStorage.getItem('textColor') || '#ffffff';
      
      bgColorInput.value = savedColor;
      textColorInput.value = savedTextColor;
      setBackgroundColor(savedColor);
      setBodyFont(savedFont);
      setTextColor(savedTextColor);
    }

    // Set background color
    function setBackgroundColor(color) {
      body.style.background = color;
      colorPreview.style.background = color;
      body.classList.add('custom-bg');
      localStorage.setItem('bgColor', color);
      updateActivePalette(color);
    }

    // Set body font
    function setBodyFont(fontFamily) {
      body.style.fontFamily = fontFamily;
      localStorage.setItem('bodyFont', fontFamily);
      updateActiveFontButton(fontFamily);
    }

    // Set text color
    function setTextColor(color) {
      body.style.color = color;
      localStorage.setItem('textColor', color);
    }

    // Cache DOM elements for font and color options (populated after creation)
    let fontOptionElements = null;
    let colorOptionElements = null;

    // Update active font button
    function updateActiveFontButton(fontFamily) {
      if (!fontOptionElements) {
        fontOptionElements = document.querySelectorAll('.font-option');
      }
      fontOptionElements.forEach(btn => {
        const btnFamily = btn.getAttribute('data-font-family');
        if (btnFamily === fontFamily) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });
    }

    // Update active state in palette
    function updateActivePalette(color) {
      if (!colorOptionElements) {
        colorOptionElements = document.querySelectorAll('.color-option');
      }
      colorOptionElements.forEach(option => {
        const optionColor = option.getAttribute('data-color').toLowerCase();
        const currentColor = color.toLowerCase();
        if (optionColor === currentColor) {
          option.classList.add('active');
        } else {
          option.classList.remove('active');
        }
      });
    }

    // Create color palette
    function createColorPalette() {
      colorOptions.forEach(color => {
        const colorOption = document.createElement('div');
        colorOption.className = 'color-option';
        colorOption.setAttribute('data-color', color);
        colorOption.style.background = color;
        colorPalette.appendChild(colorOption);
      });

      // Use event delegation for color options
      colorPalette.addEventListener('click', (e) => {
        const colorOption = e.target.closest('.color-option');
        if (colorOption) {
          const color = colorOption.getAttribute('data-color');
          setBackgroundColor(color);
          bgColorInput.value = color;
          bgColorInputQuick.value = color;
        }
      });

      // Create font selector buttons
      fontOptions.forEach(font => {
        const fontBtn = document.createElement('div');
        fontBtn.className = 'font-option';
        fontBtn.setAttribute('data-font-family', font.family);
        fontBtn.textContent = font.name;
        fontBtn.style.fontFamily = font.family;
        fontSelector.appendChild(fontBtn);
      });

      // Use event delegation for font options
      fontSelector.addEventListener('click', (e) => {
        const fontBtn = e.target.closest('.font-option');
        if (fontBtn) {
          const fontFamily = fontBtn.getAttribute('data-font-family');
          setBodyFont(fontFamily);
        }
      });
    }

    // Color wheel click handler
    colorWheel.addEventListener('click', (e) => {
      const rect = colorWheel.getBoundingClientRect();
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      const x = e.clientX - rect.left - centerX;
      const y = e.clientY - rect.top - centerY;

      const angle = Math.atan2(y, x) * (180 / Math.PI) + 90;
      const distance = Math.sqrt(x * x + y * y);
      const radius = Math.min(rect.width, rect.height) / 2;

      if (distance <= radius) {
        selectedHue = angle < 0 ? angle + 360 : angle;
        updateColorFromWheel();
      }
    });

    // Brightness slider handler
    brightnessSlider.addEventListener('input', (e) => {
      selectedBrightness = e.target.value;
      updateColorFromWheel();
    });

    // Update color from wheel and brightness
    function updateColorFromWheel() {
      // Convert HSL to RGB for darker colors
      const hue = selectedHue;
      const saturation = 70; // Fixed saturation for rich colors
      const lightness = parseInt(selectedBrightness); // Use slider for lightness

      const c = (1 - Math.abs(2 * (lightness / 100) - 1)) * saturation / 100;
      const x = c * (1 - Math.abs((hue / 60) % 2 - 1));
      const m = (lightness / 100) - c / 2;

      let r, g, b;

      if (hue < 60) {
        [r, g, b] = [c, x, 0];
      } else if (hue < 120) {
        [r, g, b] = [x, c, 0];
      } else if (hue < 180) {
        [r, g, b] = [0, c, x];
      } else if (hue < 240) {
        [r, g, b] = [0, x, c];
      } else if (hue < 300) {
        [r, g, b] = [x, 0, c];
      } else {
        [r, g, b] = [c, 0, x];
      }

      const toHex = (n) => {
        const hex = Math.round((n + m) * 255).toString(16);
        return hex.length === 1 ? '0' + hex : hex;
      };

      const color = '#' + toHex(r) + toHex(g) + toHex(b);
      setBackgroundColor(color);
      bgColorInput.value = color;
      bgColorInputQuick.value = color;
    }

    // Toggle color palette
    bgColorBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      colorPalette.classList.toggle('show');
    });

    // Close palette when clicking outside
    document.addEventListener('click', () => {
      colorPalette.classList.remove('show');
    });

    // Event listener for color input change
    bgColorInput.addEventListener('change', (e) => {
      setBackgroundColor(e.target.value);
      bgColorInputQuick.value = e.target.value;
    });

    bgColorInputQuick.addEventListener('change', (e) => {
      setBackgroundColor(e.target.value);
      bgColorInput.value = e.target.value;
    });

    // Event listener for text color change
    textColorInput.addEventListener('change', (e) => {
      setTextColor(e.target.value);
    });

    // Load background color on page load
    createColorPalette();
    loadBackgroundColor();
  </script>
</body>
</html>